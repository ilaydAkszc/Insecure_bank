@model Insecure_Bank.Models.Model.Account
@{
    ViewData["Title"] = "Hesap Detayları";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Hesap Detayları</h2>
   @*  <a href="@Url.Action("ShowAccounts", "Banking")" class="btn btn-outline-secondary">Hesap merkezine geri dön</a> *@
</div>

<div class="card">
    @* @(Model.AccountType == "Admin" ? "bg-warning" : "bg-primary") *@
    <div class="card-header bg-primary  text-white">
        <h3>Hesap #@Model.AccountNumber</h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h5>Hesap Bilgileri</h5>
                
                <p><strong>Hesap Numarası:</strong> @Model.AccountNumber</p>
                <p><strong>Hesap Tipi:</strong> @Model.AccountType</p>
                <p><strong>Bakiye:</strong> <span class="text-success h4">@Model.Balance.ToString("N2") TL</span></p>
                
            </div>
            <div class="col-md-6">
                <h5>Hesap sahibinin bilgileri</h5>
              @*   <p><strong>User ID:</strong> @Model.UserId</p> *@
                <p><strong>Kullanıcı adı:</strong> @Model.User.Username</p>
                <p><strong>Email:</strong> @Model.User.Email</p>
 

                @if (!string.IsNullOrEmpty(Model.User.Bio))
                {
                    <div class="mt-3">
                        <strong>Hakkımda:</strong>
                        <div class="p-2 border rounded bg-light">
                            @Html.Raw(Model.User.Bio)
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="mt-3">
           @*  <a href="@Url.Action("Transfer", "Banking")" class="btn btn-success">Bu hesaptan transfer yap</a> *@
            <a href="@Url.Action("Transactions", "Banking")" class="btn btn-info">İşlemleri göster</a>
        </div>
    </div>
</div>

@* <div class="alert alert-danger mt-3">
    <h6>🔓 IDOR Security Issue Detected!</h6>
    <p class="mb-1">You are viewing account details without proper authorization check.</p>
    <small>
        <strong>Current User Session:</strong> @Context.Session.GetString("Username") (ID: @Context.Session.GetInt32("UserId"))<br>
        <strong>Account Owner:</strong> @Model.User.Username (ID: @Model.UserId)<br>
        @if (Context.Session.GetInt32("UserId") != Model.UserId)
        {
            <span class="text-danger"><strong>⚠️ You are viewing someone else's account!</strong></span>
        }
    </small>
</div> *@
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}